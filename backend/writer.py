# writer.py - AI改写模块（模拟）

def generate_content(news, format_type, style):
    """生成改写内容"""
    title = news.get('title', '')
    summary = news.get('summary', '')
    source = news.get('source_name', '')

    if format_type == 'short':
        return generate_short_content(title, summary, source, style)
    else:
        return generate_long_content(title, summary, source, style)

def generate_short_content(title, summary, source, style):
    """生成短文案"""
    templates = {
        'vlog': [
            f"""哇塞！兄弟们，最新消息来了！{title}，这波真的有点东西！

讲真，看完这个我整个人都激动了。{summary[:60]}...

兄弟们，你们觉得这车怎么样？评论区聊聊！🚗💨""",

            f"""家人们！重大新闻！{title}！

{summary[:80]}

说实话，这波真的很香！我已经迫不及待想试驾了！感兴趣的兄弟萌赶紧关注起来！冲！🚀""",

            f"""最新消息！刚刚收到的猛料——{title}！

{summary[:70]}

讲道理，这配置、这价格，还要什么自行车？感兴趣的评论区扣1！"""
        ],
        'review': [
            f"""【新车快讯】{title}

{summary}

从专业角度来看，这次更新确实很有诚意。产品力提升明显，无论是配置还是价格都很有竞争力。建议感兴趣的朋友可以关注一下实车表现。""",

            f"""今日关注：{title}

客观分析：{summary}

总的来说，这是一款值得关注的产品。具体表现如何，建议到店体验后再做判断。"""
        ],
        'push': [
            f"""🔥重磅推荐！{title}！

{summary}

真的！这次太给力了！宝子们，这波绝对不能错过！

私我了解详情，还有额外福利！先到先得！冲鸭！🎉""",

            f"""❤️‍🔥强烈种草！{title}

{summary}

我的天！这个产品也太香了吧！

想入手的宝子们，抓紧时间！名额有限！

评论区扣"1"安排！"""
        ],
        'news': [
            f"""【汽车资讯】{title}

{summary}

记者了解到，该车型/技术的推出将进一步丰富消费者的选择空间。具体售价及配置信息，请关注官方后续报道。""",

            f"""汽车圈又有新动静！{title}

{summary}

业内人士分析认为，的相关布局将对行业格局产生一定影响。更多详情，我们将持续关注。"""
        ]
    }

    options = templates.get(style, templates['vlog'])
    return options[0]

def generate_long_content(title, summary, source, style):
    """生成长文章"""
    templates = {
        'vlog': [
            f"""🚗 {title}

——我是分割线——

家人们！今天来聊聊刚刚收到的重磅消息！{title}！

说实话，当我第一眼看到这个新闻的时候，整个人都精神了！{summary}

今天咱们就好好聊聊这个事儿。首先呢，这个时间点发布，确实很有意思。大家都知道，最近汽车圈那是相当的卷，各大厂商都在发力。

从目前曝光的信息来看，这次的新品/新技术确实有不少亮点：

1️⃣ 第一个亮点...（产品力提升明显）
2️⃣ 第二个亮点...（性价比突出）
3️⃣ 第三个亮点...（技术创新）

总的来说呢，这次的诚意还是相当足的。当然，具体表现怎么样，还得看实车。

好了，今天的分享就到这里。兄弟们有什么看法，欢迎评论区聊聊！咱们下期再见！👋
""",
            f"""🎬 {title}

hello大家好，我是你们的汽车博主！今天带来一个超级重磅的消息！

没错！就是{title}！

{summary}

作为一名从业多年的汽车编辑，我看过的车说实话真不少了。但这次，还是有点东西的。

先说说我的几点看法：

第一点，外观设计确实很有辨识度。现在这个市场，没有点特色真的很难脱颖而出。

第二点，动力系统/配置水平很有竞争力。性价比这一块，直接拉满。

第三点，品牌这次的定价策略很有意思。看来是铁了心要抢占市场份额。

当然，具体表现如何，我建议大家还是去4S店实地体验一下。毕竟网上说的再香，不如自己坐上去感受一下。

ok，今天的分享就到这里。如果觉得有用，记得一键三连！我是你们的老朋友，下期再会！"""
        ],
        'review': [
            f"""【深度解析】{title}

一、事件背景

今日，汽车行业迎来重要消息：{title}。{summary}

二、产品/技术分析

1. 动力系统
本次更新在动力方面的提升较为明显。采用了最新的技术路线，在保证动力输出的同时，进一步优化了燃油经济性/续航表现。

2. 智能配置
智能化是当下汽车发展的重要方向。本次更新在智能座舱、智能驾驶方面都有所升级。具体表现在：
- 芯片算力提升
- 传感器数量增加
- 软件算法优化

3. 空间舒适性
作为家用车，空间表现至关重要。新车在轴距/车身尺寸上有所提升，实际乘坐体验需要实车验证。

三、市场影响分析

从市场角度来看，{title}的推出，将对同级别竞品形成一定压力。尤其是在细分市场，可能引发新一轮竞争。

四、购买建议

对于近期有购车计划的朋友，建议：
1. 保持关注，等待详细评测
2. 试驾体验，感受实际表现
3. 对比竞品，综合考虑性价比

本文将持续关注该车型的后续报道。"""
        ],
        'push': [
            f"""❤️ 强烈推荐！{title}

家人们！今天必须给大家安利一波！

你们要的真的来了！{title}！

讲真，当我第一眼看到这个的时候，我就知道——这波稳了！

先说说这个{summary}

相信我，这绝对是一款值得关注的产品！为什么这么说？

✅ 亮点一：颜值能打
✅ 亮点二：配置丰富
✅ 亮点三：价格美丽

而且最重要的是，现在入手真的是最佳时机！

我已经帮你们试过了，确实香！想了解的宝子们，评论区扣"1"，我来安排！

数量有限，先到先得！冲鸭！🎉

#汽车 #新车 #种草"""
        ],
        'news': [
            f"""【汽车之家】{title}

[新闻背景]

今日，{source}正式对外发布了{title}的相关信息。{summary}

[详细报道]

据官方介绍，本次发布的车型/技术具有以下特点：

一、产品亮点
1. 采用最新的设计语言，外观更具辨识度
2. 动力系统全面升级，性能表现更出色
3. 智能配置丰富，智能化程度更高

二、市场定位
该车型主要面向追求品质生活的消费群体，定价策略兼顾性价比。

三、未来规划

官方表示，将持续深耕中国市场，为消费者带来更多优质产品。

[记者观察]

作为汽车行业的重要事件，{title}的发布引起了业内广泛关注。有分析认为，这将推动细分市场的竞争格局发生变化。

[后续报道]

我们将持续关注该车型的最新进展，并为您带来更多详细报道。"""
        ]
    }

    options = templates.get(style, templates['vlog'])
    return options[0]
